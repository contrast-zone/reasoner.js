<!DOCTYPE html>
<!--?xml version="1.0"?-->
<html xmlns="http://www.w3.org/1999/xhtml" xmlns:svg="http://www.w3.org/2000/svg">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">

<title>reasoner.js playground</title>
<link rel="icon" type="image/png" href="">

<script src="../src/s-expr.js"></script>
<script src="../src/ruler.js"></script>
<script src="../src/rewriter.js"></script>
<script src="edit.js"></script>

<script id="test0" type="text/plain">
(
    RULE
    (
        READ
        
        (RULE (READ) (WRITE (goes <name> (b c))))
        
        (RULE (READ <name>) (WRITE Milo))
        (RULE (READ <name>) (WRITE Nora))

        (RULE (READ b) (WRITE (z z)))
        (RULE (READ ((z z) c)) (WRITE (miu c1)))
        (RULE (READ c1) (WRITE (h mau i)))
        (
            MATCH
            (VAR <X> <Y>)
            (RULE (READ (<X> (h <Y> i))) (WRITE (<X> <Y>)))
        )
        (RULE (READ (miu mau)) (WRITE meow))

        (RULE (READ b) (WRITE (wow 1)))
        (RULE (READ c) (WRITE (wow 2)))
        (
            MATCH
            (VAR <X> <Y> <Z>)
            (RULE (READ ((wow <X>) (wow <Y>))) (WRITE (unb <Z> <Z>)))
        )
        (RULE (READ (unb xyz xyz)) (WRITE bark))
    )
    (
        CHAIN
        
        (
            MATCH
            (VAR <X>)
            (RULE (READ (goes <X> meow)) (WRITE (isA <X> cat)))
        )
        (
            MATCH
            (VAR <X>)
            (RULE (READ (goes <X> bark)) (WRITE (isA <X> dog)))
        )
    )
    (
        WRITE
        
        (RULE (READ Milo) (WRITE <name>  ))
        (RULE (READ Nora) (WRITE <name>  ))
        (RULE (READ cat ) (WRITE <living>))
        (RULE (READ dog ) (WRITE <living>))
        
        (RULE (READ (isA <name> <living>)) (WRITE))
    )
)
</script>

<script id="test0-input" type="text/plain">
(goes Nora meow)
</script>

<script id="example0" type="text/plain">
(
    RULE
    (
        READ
        (RULE (READ) (WRITE (hearing <voice>)))
        
        (RULE (READ <voice>) (WRITE barks            ))
        (RULE (READ <voice>) (WRITE meows            ))
    )
    (
        CHAIN
        (RULE (READ (hearing meows)) (WRITE (being cat)))
        (RULE (READ (hearing barks)) (WRITE (being dog)))
    )
    (
        WRITE
        (RULE (READ cat           ) (WRITE <living>))
        (RULE (READ dog           ) (WRITE <living>))
        
        (RULE (READ (being <living>)) (WRITE))
    )
)
</script>

<script id="example0-input" type="text/plain">
(hearing meows)
</script>

<script id="example1-3" type="text/plain">
/*
    simple input/output example
    
     input: `(hello machine)`
    output: `(hello world)`
*/

(
    CHAIN
    (
        READ
        (WRITE (hello machine))
    )
    (
        CHAIN
        (RULE (READ (hello machine)) (WRITE (hello world)))
    )
    (
        WRITE
        (READ (hello world))
    )
)
</script>

<script id="example1-3-input" type="text/plain">
(hello machine)
</script>

<script id="example1-1" type="text/plain">
/*
    hello world example
    
     input: `(hello machine)`
    output: `(hello world)`
*/

(RULE (READ (hello machine)) (WRITE (hello world)))
</script>

<script id="example1-1-input" type="text/plain">
(hello machine)
</script>

<script id="example1-2" type="text/plain">
/*
    hello entity example
    
     input: `(greet <Name>)`
    output: `(hello <Name>)`
*/

(
    MATCH
    (VAR <Name>)
    (RULE (READ (greet <Name>)) (WRITE (hello <Name>)))
)
</script>

<script id="example1-2-input" type="text/plain">
(greet human)
</script>

<script id="example-2-1-1" type="text/plain">
/*
    toy making decision
    
     input: `(isGood girl/boy)`
    output: `(makeToy doll/car)`
*/

(
    CHAIN
    (RULE (READ (isGood girl)) (WRITE (makeToy doll)))
    (RULE (READ (isGood boy) ) (WRITE (makeToy car) ))
)
</script>

<script id="example-2-1-1-input" type="text/plain">
(isGood girl)
</script>

<script id="example-2-1-2" type="text/plain">
/*
    shadows decision
    
     input: `(sunIs rising/falling)`
    output: `(shadowsDo expand/shrink)`
*/

(
    CHAIN
    (RULE (READ (sunIs rising) ) (WRITE (itIs morning)  ))
    (RULE (READ (sunIs falling)) (WRITE (itIs afternoon)))

    (RULE (READ (itIs morning)  ) (WRITE (shadowsLean west)))
    (RULE (READ (itIs afternoon)) (WRITE (shadowsLean east)))

    (RULE (READ (shadowsLean west)) (WRITE (shadowsDo shrink)))
    (RULE (READ (shadowsLean east)) (WRITE (shadowsDo expand)))
)
</script>

<script id="example-2-1-2-input" type="text/plain">
(sunIs rising)
</script>

<script id="example-2-2-1" type="text/plain">
/*
    weighting decision
    
     input: `(orbitsAround <planet> <planet>)`
    output: `(weigthtsMoreThan <planet> <planet>)`
*/

(
    CHAIN
    (
        MATCH
        (VAR <O1> <O2>)
        (
            RULE
            (READ (orbitsAround <O1> <O2>))
            (WRITE (weightsMoreThan <O2> <O1>))
        )
    )
)
</script>

<script id="example-2-2-1-input" type="text/plain">
(orbitsAround Earth Sun)
</script>

<script id="example-2-2-2" type="text/plain">
/*
    job title decision
    
     input: `(isDoing <Name> (driving rocket)/(healing people))`
    output: `(isTitled <Name> astronaut/doctor)`
*/

(
    CHAIN
    (
        MATCH
        (VAR <Name>)
        (
            RULE
            (READ (isDoing <Name> (driving rocket)))
            (WRITE (isTitled <Name> astronaut))
        )
    )
    (
        MATCH
        (VAR <Name>)
        (
            RULE
            (READ (isDoing <Name> (healing people)))
            (WRITE (isTitled <Name> doctor))
        )
    )
)
</script>

<script id="example-2-2-2-input" type="text/plain">
(isDoing Jane (driving rocket))
</script>

<script id="example-3-2-1" type="text/plain">
/*
    weighting decision
    
     input: `(orbitsAround sun/earth/moon sun/earth/moon)`
    output: `(weigthtsMoreThan sun/earth/moon sun/earth/moon)`
*/

(
    RULE
    (
        READ
        
        (RULE (READ) (WRITE (orbitsAround <object> <object>)))
        
        (RULE (READ <object>) (WRITE sun  ))
        (RULE (READ <object>) (WRITE earth))
        (RULE (READ <object>) (WRITE moon ))
    )
    (
        CHAIN
        (
            MATCH
            (VAR <O1> <O2>)
            (
                RULE
                (READ (orbitsAround <O1> <O2>))
                (WRITE (attractsMoreThan <O2> <O1>))
            )
        )
        (
            MATCH
            (VAR <O1> <O2>)
            (
                RULE
                (READ (attractsMoreThan <O1> <O2>))
                (WRITE (weightsMoreThan <O1> <O2>))
            )
        )
    )
    (
        WRITE
        
        (RULE (READ sun  ) (WRITE <object>))
        (RULE (READ earth) (WRITE <object>))
        (RULE (READ moon ) (WRITE <object>))
        
        (RULE (READ (weightsMoreThan <object> <object>)) (WRITE))
    )
)
</script>

<script id="example-3-2-1-input" type="text/plain">
(orbitsAround earth sun)
</script>

<script id="example-2-3-1" type="text/plain">
/*
    student decision
    
     input: `(isBeingEducated <Name>)`
    output: `(isAStudent <Name>)`
*/

(
    CHAIN
    (
        MATCH
        (VAR <Name>)
        (
            RULE
            (READ (isBeingEducated <Name>))
            (WRITE (attendsSchool <Name>) (attendsCollege <Name>))
        )
    )
    (
        MATCH
        (VAR <Name>)
        (
            RULE
            (READ (attendsCollege <Name>))
            (WRITE (isAStudent <Name>))
        )
    )
    (
        MATCH
        (VAR <Name>)
        (
            RULE
            (READ (attendsSchool <Name>))
            (WRITE (isAStudent <Name>))
        )
    )
)
</script>

<script id="example-2-3-1-input" type="text/plain">
(isBeingEducated Jane)
</script>

<script id="example-2-3-2" type="text/plain">
/*
    computer expert decision
    
     input: `(buildsARobot <Name>)`
    output: `(isAComputerExpert <Name>)`
*/

(
    CHAIN
    (
        MATCH
        (VAR <Name>)
        (
            RULE
            (READ (buildsARobot <Name>))
            (WRITE (mastersHardware <Name>))
        )
    )
    (
        MATCH
        (VAR <Name>)
        (
            RULE
            (READ (buildsARobot <Name>))
            (WRITE (mastersSoftware <Name>))
        )
    )
    (
        MATCH
        (VAR <Name>)
        (
            RULE
            (READ (mastersSoftware <Name>) (mastersHardware <Name>))
            (WRITE (isAComputerExpert <Name>))
        )
    )
)
</script>

<script id="example-2-3-2-input" type="text/plain">
(buildsARobot Jane)
</script>

<script id="example-3-2-3" type="text/plain">
/*
    world spinning decision
    
     input: `(peopleAre happy/sad)`
    output: `(stillTurns world)`
*/

(
    RULE
    (
        READ
        
        (RULE (READ) (WRITE (peopleAre <mood>)))
        
        (RULE (READ <mood>) (WRITE happy))
        (RULE (READ <mood>) (WRITE sad  ))
    )
    (
        WRITE
        
        (RULE (READ world) (WRITE <object>))
        
        (RULE (READ (stillTurns <object>)) (WRITE))
    )
)
</script>

<script id="example-3-2-3-input" type="text/plain">
(peopleAre happy)
</script>

<script id="example-eq" type="text/plain">
/*
    equality predicate hack
    
     input: `(iseql <X> <Y>)`
    output: `true/false`
*/

(
    CHAIN
    (
        MATCH
        (VAR <X>)
        (RULE (READ (iseql <X> <X>)) (WRITE T))
    )
    (
        MATCH
        (VAR <X> <Y>)
        (RULE (READ (iseql <X> <Y>)) (WRITE F))
    )
)
</script>

<script id="example-eq-input" type="text/plain">
(iseql (x + 1) (x + 1))
</script>

<script id="example-branch" type="text/plain">
/*
    branching choice
    
     input: `(if <condition> then <whentrue> else <whenfalse>)`
    output: `<whentrue>/<whenfalse>`
*/

(
    RULE
    (
        READ
        
        (
            MATCH
            (VAR <X> <Y>)
            (RULE (READ) (WRITE (if <bool> then <X> else <Y>)))
        )
        
        (RULE (READ <bool>) (WRITE T))
        (RULE (READ <bool>) (WRITE F))
    )
    (
        CHAIN
        (
            MATCH
            (VAR <X> <Y>)
            (RULE (READ (if T then <X> else <Y>)) (WRITE <X>))
        )
        (
            MATCH
            (VAR <X> <Y>)
            (RULE (READ (if F then <X> else <Y>)) (WRITE <Y>))
        )
    )
    (
        WRITE
        (MATCH (VAR <XY>) (RULE (READ <XY>) (WRITE)))
    )
)
</script>

<script id="example-branch-input" type="text/plain">
(if T then "Yes, it's true." else "No, it's false.")
</script>

<script id="example-bool" type="text/plain">

/*
    Boolean evaluator
    
     input: Boolean expression
    output: Boolean constant
*/

(
    RULE
    (
        READ
        
        (RULE (READ) (WRITE <bool>))
        
        (RULE (READ <bool>) (WRITE (not <bool>)        ))
        (RULE (READ <bool>) (WRITE (and <bool> <bool>) ))
        (RULE (READ <bool>) (WRITE (or <bool> <bool>)  ))
        (RULE (READ <bool>) (WRITE (impl <bool> <bool>)))
        (RULE (READ <bool>) (WRITE (eq <bool> <bool>)  ))
        (RULE (READ <bool>) (WRITE <const>             ))
        
        (RULE (READ <const>) (WRITE T))
        (RULE (READ <const>) (WRITE F))
    )
    (
        CHAIN
        
        // truth table for `not` operator
        (RULE (READ (not T)) (WRITE F))
        (RULE (READ (not F)) (WRITE T))
        
        // truth table for `and` operator
        (RULE (READ (and T T)) (WRITE T))
        (RULE (READ (and T F)) (WRITE F))
        (RULE (READ (and F T)) (WRITE F))
        (RULE (READ (and F F)) (WRITE F))

        // truth table for `or` operator
        (RULE (READ (or T T)) (WRITE T))
        (RULE (READ (or T F)) (WRITE T))
        (RULE (READ (or F T)) (WRITE T))
        (RULE (READ (or F F)) (WRITE F))
        
        // truth table for `impl` operator
        (RULE (READ (impl T T)) (WRITE T))
        (RULE (READ (impl T F)) (WRITE F))
        (RULE (READ (impl F T)) (WRITE T))
        (RULE (READ (impl F F)) (WRITE T))
        
        // truth table for `eq` operator
        (RULE (READ (eq T T)) (WRITE T))
        (RULE (READ (eq T F)) (WRITE F))
        (RULE (READ (eq F T)) (WRITE F))
        (RULE (READ (eq F F)) (WRITE T))
    )
    (
        WRITE
        
        (RULE (READ T) (WRITE))
        (RULE (READ F) (WRITE))
    )
)
</script>

<script id="example-bool-input" type="text/plain">
(
    eq
    (and T F)
    (not (or (not T) (not F)))
)
</script>

<script id="example-binadd" type="text/plain">
/*
    binary number addition
*/

(
    CHAIN
    
    // both numbers single digits
                         (RULE (READ (add       0       0)) (WRITE                         0))
                         (RULE (READ (add       0       1)) (WRITE                         1))
                         (RULE (READ (add       1       0)) (WRITE                         1))
                         (RULE (READ (add       1       1)) (WRITE (                    1 0)))
    
    // first number multiple digits, second number single digit
    (MATCH     (VAR <A>) (RULE (READ (add (<A> 0)       0)) (WRITE (                  <A> 0))))
    (MATCH     (VAR <A>) (RULE (READ (add (<A> 0)       1)) (WRITE (                  <A> 1))))
    (MATCH     (VAR <A>) (RULE (READ (add (<A> 1)       0)) (WRITE (                  <A> 1))))
    (MATCH     (VAR <A>) (RULE (READ (add (<A> 1)       1)) (WRITE (          (add 1 <A>) 0))))
    
    // first number single digit, second number multiple digits
    (MATCH     (VAR <B>) (RULE (READ (add       0 (<B> 0))) (WRITE (                  <B> 0))))
    (MATCH     (VAR <B>) (RULE (READ (add       0 (<B> 1))) (WRITE (                  <B> 1))))
    (MATCH     (VAR <B>) (RULE (READ (add       1 (<B> 0))) (WRITE (                  <B> 1))))
    (MATCH     (VAR <B>) (RULE (READ (add       1 (<B> 1))) (WRITE (          (add 1 <B>) 0))))
    
    // both numbers multiple digits
    (MATCH (VAR <A> <B>) (RULE (READ (add (<A> 0) (<B> 0))) (WRITE (        (add <A> <B>) 0))))
    (MATCH (VAR <A> <B>) (RULE (READ (add (<A> 0) (<B> 1))) (WRITE (        (add <A> <B>) 1))))
    (MATCH (VAR <A> <B>) (RULE (READ (add (<A> 1) (<B> 0))) (WRITE (        (add <A> <B>) 1))))
    (MATCH (VAR <A> <B>) (RULE (READ (add (<A> 1) (<B> 1))) (WRITE ((add 1 (add <A> <B>)) 0))))
)
</script>

<script id="example-binadd-input" type="text/plain">
(
    add
    (((1 1) 0) 0)
    (((0 1) 0) 1)
)
</script>

<script id="example-bincompare" type="text/plain">
/*
    binary number comparison
*/

(
    CHAIN
    
    // both numbers single digits
                         (RULE (READ (cmp       0       0)) (WRITE                 eq))
                         (RULE (READ (cmp       0       1)) (WRITE                 lt))
                         (RULE (READ (cmp       1       0)) (WRITE                 gt))
                         (RULE (READ (cmp       1       1)) (WRITE                 eq))
    
    // first number multiple digits, second number single digit
    (MATCH     (VAR <A>) (RULE (READ (cmp (<A> 0)       0)) (WRITE ((cmp <A>   0) eq))))
    (MATCH     (VAR <A>) (RULE (READ (cmp (<A> 0)       1)) (WRITE ((cmp <A>   0) lt))))
    (MATCH     (VAR <A>) (RULE (READ (cmp (<A> 1)       0)) (WRITE ((cmp <A>   0) gt))))
    (MATCH     (VAR <A>) (RULE (READ (cmp (<A> 1)       1)) (WRITE ((cmp <A>   0) eq))))
    
    // first number single digit, second number multiple digits
    (MATCH     (VAR <B>) (RULE (READ (cmp       0 (<B> 0))) (WRITE ((cmp   0 <B>) eq))))
    (MATCH     (VAR <B>) (RULE (READ (cmp       0 (<B> 1))) (WRITE ((cmp   0 <B>) lt))))
    (MATCH     (VAR <B>) (RULE (READ (cmp       1 (<B> 0))) (WRITE ((cmp   0 <B>) gt))))
    (MATCH     (VAR <B>) (RULE (READ (cmp       1 (<B> 1))) (WRITE ((cmp   0 <B>) eq))))
    
    // both numbers multiple digits
    (MATCH (VAR <A> <B>) (RULE (READ (cmp (<A> 0) (<B> 0))) (WRITE ((cmp <A> <B>) eq))))
    (MATCH (VAR <A> <B>) (RULE (READ (cmp (<A> 0) (<B> 1))) (WRITE ((cmp <A> <B>) lt))))
    (MATCH (VAR <A> <B>) (RULE (READ (cmp (<A> 1) (<B> 0))) (WRITE ((cmp <A> <B>) gt))))
    (MATCH (VAR <A> <B>) (RULE (READ (cmp (<A> 1) (<B> 1))) (WRITE ((cmp <A> <B>) eq))))
    
    // reduce to final value
    (MATCH (VAR <X>) (RULE (READ (gt <X>)) (WRITE gt )))
    (MATCH (VAR <X>) (RULE (READ (lt <X>)) (WRITE lt )))
    (MATCH (VAR <X>) (RULE (READ (eq <X>)) (WRITE <X>)))
)
</script>

<script type="text/plain">
    // leq predicate
    (MATCH (VAR <A> <B>) (RULE (READ (leq <A> <B>)) (WRITE (mapToBool (cmp <A> <B>)))))
    (RULE (READ (mapToBool gt)) (WRITE F))
    (RULE (READ (mapToBool lt)) (WRITE T))
    (RULE (READ (mapToBool eq)) (WRITE T))
</script>

<script id="example-bincompare-input" type="text/plain">
(
    cmp
    (((1 1) 0) 1)
    (((0 1) 0) 1)
)
</script>

<script id="example-lcalc" type="text/plain">
/*
    untyped lambda calculus example
    
     input: lambda expression
    output: evaluated expression
*/
</script>

<script id="example-lcalc-input" type="text/plain">
(((lmbd <a>) (lmbd <b>) (<b> <a>)) x y)
</script>

<!--script id="example-lcalc" type="text/plain">
/*
    untyped lambda calculus example
    
     input: lambda expression
    output: evaluated expression
*/

(
    MATCH
    (VAR <X> <M> <N>)
    (
        RULE
        (
            READ
            (RULE (READ) (WRITE ((lmbd <X>) <M>) <N>))
        )
        (
            WRITE
            (RULE (READ <N>) (WRITE <X>))
            (RULE (READ <M>) (WRITE))
        )
    )
)
</script-->

<!--script id="example-lcalc" type="text/plain">
/*
    untyped lambda calculus example
    
     input: lambda expression
    output: evaluated expression
*/

(
    CHAIN
    
    // intermediate expression
    (
        MATCH
        (VAR <X> <Y> <M>)
        (
            RULE
            (
                READ
                ((lmbd <X>) <M>)
            )
            (
                WRITE
                (<intrmd> <X> <Y> <M>)
            )
        )
    )

    // alpha conversion
    (
        MATCH
        (VAR <X> <Y> <M>)
        (
            RULE
            (
                READ
                (<intrmd> <X> <Y> <M>)
                <X>
            )
            (
                WRITE
                <Y>
            )
        )
    )
    
    // beta reduction
    (
        MATCH
        (VAR <X> <Y> <M> <N>)
        (
            RULE
            (
                READ
                ((<intrmd> <X> <Y> <M>) <N>)
            )
            (
                WRITE
                <M>
            )
        )
    )
    (
        MATCH
        (VAR <X> <Y> <M> <N>)
        (
            RULE
            (
                READ
                ((<intrmd> <X> <Y> <M>) <N>)
                <Y>
            )
            (
                WRITE
                <N>
            )
        )
    )
)
</script-->

<!--script id="example-lcalc-input" type="text/plain">
((((lmbd <a>) ((lmbd <b>) (<b> <a>))) x) y)
</script-->

<script id="example-ski" type="text/plain">
/*
    SKI calculus example
    
     input: SKI expression
    output: evaluated expression
*/

(
    CHAIN
    
    // combinators definition
    (
        MATCH
        (VAR <A>)
        (RULE (READ I) (WRITE (impl <A> <A>)))
    )
    (
        MATCH
        (VAR <A> <B>)
        (RULE (READ K) (WRITE (impl <A> (impl <B> <A>))))
    )
    (
        MATCH
        (VAR <A> <B> <C>)
        (RULE (READ S) (WRITE (impl (impl <A> (impl <B> <C>)) (impl (impl <A> <B>) (impl <A> <C>)))))
    )
    
    // combinators application
    (
        MATCH
        (VAR <A> <B>)
        (RULE (READ ((impl <A> <B>) <A>)) (WRITE <B>))
    )
)
</script>

<script id="example-ski-input" type="text/plain">
(S (K (S I)) (S (K K) I) x y)
</script>

<script id="example-poslog" type="text/plain">
/*
    to do: positive logic example
    
     input: rules and expression
    output: evaluated expression
*/
</script>

<script id="example-poslog-input" type="text/plain">
(
    POSLOG
    (
        RULES
        ((add x 0) -> 0)
        ((add x (succ y)) -> (add (succ x) y))
    )
    (
        EXPR
        (add (succ (succ 0)) (succ (succ (succ 0))))
    )
)
</script>

<script id="example-loglcalc" type="text/plain">
/*
    to do: positive logic typed lambda calculus example
    
     input: typed lambda expression
    output: evaluated expression
*/

</script>

<script id="example-loglcalc-input" type="text/plain">
</script>

<script  id="example-proofcheck" type="text/plain">
/*
    propositional logic proof checker
*/

(
    CHAIN
    
    /*
        proving system
    */

    (MATCH (VAR a) (RULE (READ ([Assume] a)) (WRITE a)))
    
    (MATCH (VAR a b) (RULE (READ ([/\Intro] (a b)                                )) (WRITE (a /\ b) )))
    (MATCH (VAR a b) (RULE (READ ([/\Elim1] (a /\ b)                             )) (WRITE a        )))
    (MATCH (VAR a b) (RULE (READ ([/\Elim2] (a /\ b)                             )) (WRITE b        )))
    (MATCH (VAR a b) (RULE (READ ([\/Intro1] a                                   )) (WRITE (a \/ b) )))
    (MATCH (VAR a b) (RULE (READ ([\/Intro2] b                                   )) (WRITE (a \/ b) )))
    (MATCH (VAR a b) (RULE (READ ([\/Elim] ((a \/ b) (a ... False) (b ... False)))) (WRITE False    )))
    (MATCH (VAR a b) (RULE (READ ([->Intro] (a ... b)                            )) (WRITE (a -> b) )))
    (MATCH (VAR a b) (RULE (READ ([->Elim] ((a -> b) a)                          )) (WRITE b        )))
    (MATCH (VAR a b) (RULE (READ ([<->Intro] ((a -> b) (b -> a))                 )) (WRITE (a <-> b))))
    (MATCH (VAR a b) (RULE (READ ([<->Elim1] ((a <-> b) a)                       )) (WRITE b        )))
    (MATCH (VAR a b) (RULE (READ ([<->Elim2] ((a <-> b) b)                       )) (WRITE a        )))
    (MATCH   (VAR a) (RULE (READ ([~Intro] (a ... False)                         )) (WRITE (~ a)    )))
    (MATCH   (VAR a) (RULE (READ ([~Elim] ((~ a) a)                              )) (WRITE False    )))
    (MATCH   (VAR a) (RULE (READ ([X] False                                      )) (WRITE a        )))
    (MATCH   (VAR a) (RULE (READ ([IP] ((~ a) ... False)                         )) (WRITE a        )))
)
</script>

<script id="example-proofcheck-input" type="text/plain">
/*
    checking De Morgan's law
*/

(
    // (A /\ B) <-> (~ (~ A \/ ~ B))
    [<->Intro]
    (
        (
            // (A /\ B) -> (~ (~ A \/ ~ B))
            [->Intro]
            (
                (
                    [Assume]
                    (A /\ B)
                )
                ...
                (
                    // (~ ((~ A) \/ (~ B)))
                    [~Intro]
                    (
                        (
                            [Assume]
                            ((~ A) \/ (~ B))
                        )
                        ...
                        (
                            // False
                            [\/Elim]
                            (
                                (
                                    [Assume]
                                    ((~ A) \/ (~ B)
                                    )
                                )
                                (
                                    (
                                        [Assume]
                                        (~ A)
                                    )
                                    ...
                                    (
                                        // False
                                        [~Elim]
                                        (
                                            (
                                                [Assume]
                                                (~ A)
                                            )
                                            (
                                                // A
                                                [/\Elim1]
                                                (
                                                    [Assume]
                                                    (A /\ B)
                                                )
                                            )
                                        )
                                    )
                                )
                                (
                                    (
                                        [Assume]
                                        (~ B)
                                    )
                                    ...
                                    (
                                        // False
                                        [~Elim]
                                        (
                                            (
                                                [Assume]
                                                (~ B)
                                            )
                                            (
                                                // B
                                                [/\Elim2]
                                                (
                                                    [Assume]
                                                    (A /\ B)
                                                )
                                            )
                                        )
                                    )
                                )
                            )
                        )
                    )
                )
            )
        )
        (
            // (~ ((~ A) \/ (~ B))) -> (A /\ B)
            [->Intro]
            (
                (
                    [Assume]
                    (~ ((~ A) \/ (~ B)))
                )
                ...
                (
                    // A /\ B
                    [/\Intro]
                    (
                        (
                            // A
                            [IP]
                            (
                                (
                                    [Assume]
                                    (~ A)
                                )
                                ...
                                (
                                    // False
                                    [~Elim]
                                    (
                                        (
                                            [Assume]
                                            (~ ((~ A) \/ (~ B)))
                                        )
                                        (
                                            // (~ A) \/ UNDEFINED
                                            [\/Intro1]
                                            (
                                                [Assume]
                                                (~ A)
                                            )
                                        )
                                    )
                                )
                            )
                        )
                        (
                            // B
                            [IP]
                            (
                                (
                                    [Assume]
                                    (~ B)
                                )
                                ...
                                (
                                    // False
                                    [~Elim]
                                    (
                                        (
                                            [Assume]
                                            (~ ((~ A) \/ (~ B)))
                                        )
                                        (
                                            // UNDEFINED \/ (~ B)
                                            [\/Intro2]
                                            (
                                                [Assume]
                                                (~ B)
                                            )
                                        )
                                    )
                                )
                            )
                        )
                    )
                )
            )
        )
    )
)
</script>

<script  id="example-proofcheck1" type="text/plain">
/*
    a proof check for De Morgan's law
*/

(
    CHAIN
    
    /*
        proving system
    */
    /*
    (MATCH (VAR a) (RULE (READ ([Assume] a)) (WRITE a)))
    
    (MATCH (VAR a b) (RULE (READ ([/\Intro] (a b)                                )) (WRITE (a /\ b) )))
    (MATCH (VAR a b) (RULE (READ ([/\Elim1] (a /\ b)                             )) (WRITE a        )))
    (MATCH (VAR a b) (RULE (READ ([/\Elim2] (a /\ b)                             )) (WRITE b        )))
    (MATCH (VAR a b) (RULE (READ ([\/Intro1] a                                   )) (WRITE (a \/ b) )))
    (MATCH (VAR a b) (RULE (READ ([\/Intro2] b                                   )) (WRITE (a \/ b) )))
    (MATCH (VAR a b) (RULE (READ ([\/Elim] ((a \/ b) (a ... False) (b ... False)))) (WRITE False    )))
    (MATCH (VAR a b) (RULE (READ ([->Intro] (a ... b)                            )) (WRITE (a -> b) )))
    (MATCH (VAR a b) (RULE (READ ([->Elim] ((a -> b) a)                          )) (WRITE b        )))
    (MATCH (VAR a b) (RULE (READ ([<->Intro] ((a -> b) (b -> a))                 )) (WRITE (a <-> b))))
    (MATCH (VAR a b) (RULE (READ ([<->Elim1] ((a <-> b) a)                       )) (WRITE b        )))
    (MATCH (VAR a b) (RULE (READ ([<->Elim2] ((a <-> b) b)                       )) (WRITE a        )))
    (MATCH   (VAR a) (RULE (READ ([~Intro] (a ... False)                         )) (WRITE (~ a)    )))
    (MATCH   (VAR a) (RULE (READ ([~Elim] ((~ a) a)                              )) (WRITE False    )))
    (MATCH   (VAR a) (RULE (READ ([X] False                                      )) (WRITE a        )))
    (MATCH   (VAR a) (RULE (READ ([IP] ((~ a) ... False)                         )) (WRITE a        )))
    */
    /*
        proof specification
    */
    
    // (A /\ B) -> ~(~ A \/ ~ B)
    (RULE (READ f1      ) (WRITE ([Assume] (A /\ B))                    ))
    (RULE (READ   f2    ) (WRITE ([Assume] ((~ A) \/ (~ B)))            ))
    (RULE (READ     f3  ) (WRITE ([Assume] (~ A))                       ))
    (RULE (READ       f4) (WRITE ([/\Elim1] f1)                         )) // A
    (RULE (READ       f5) (WRITE ([~Elim] (f3 f4))                      )) // False
    (RULE (READ     f6  ) (WRITE ([Assume] (~ B))                       ))
    (RULE (READ       f7) (WRITE ([/\Elim2] f1)                         )) // B
    (RULE (READ       f8) (WRITE ([~Elim] (f6 f7))                      )) // False
    (RULE (READ     f9  ) (WRITE ([\/Elim] (f2 (f3 ... f5) (f6 ... f8))))) // False
    (RULE (READ   f10   ) (WRITE ([~Intro] (f2 ... f9))                 )) // ~ ((~ A) \/ (~ B))
    (RULE (READ th1     ) (WRITE ([->Intro] (f1 ... f10))               )) // (A /\ B) -> (~ ((~ A) \/ (~ B)))
    
    // ~(~A \/ ~B) -> (A /\ B)
    (RULE (READ f11     ) (WRITE ([Assume] (~ ((~ A) \/ (~ B))))        ))
    (RULE (READ   f12   ) (WRITE ([Assume] (~ A))                       ))
    (RULE (READ     f13 ) (WRITE ([\/Intro1] f12)                       )) // (~ A) \/ UNDEFINED
    (RULE (READ     f14 ) (WRITE ([~Elim] (f11 f13))                    )) // False
    (RULE (READ   f15   ) (WRITE ([IP] (f12 ... f14))                   )) // A
    (RULE (READ   f16   ) (WRITE ([Assume] (~ B))                       ))
    (RULE (READ     f17 ) (WRITE ([\/Intro2] f16)                       )) // UNDEFINED \/ (~ B)
    (RULE (READ     f18 ) (WRITE ([~Elim] (f11 f17))                    )) // False
    (RULE (READ   f19   ) (WRITE ([IP] (f16 ... f18))                   )) // B
    (RULE (READ   f20   ) (WRITE ([/\Intro] (f15 f19))                  )) // A /\ B
    (RULE (READ th2     ) (WRITE ([->Intro] (f11 ... f20))              )) //(~ ((~ A) \/ (~ B))) -> (A /\ B)
    
    // (A /\ B) <-> ~(~A \/ ~B)
    (RULE (READ (CHECK DeMorgan)) (WRITE ([<->Intro] (th1 th2)))) // (A /\ B) <-> (~ ((~ A) \/ (~ B)))
)
</script>

<script id="example-proofcheck1-input" type="text/plain">
(CHECK DeMorgan)
</script>

<script id="example-clslog" type="text/plain">
/*
    to do: classical logic example
*/
</script>

<script id="example-clslog-input" type="text/plain">
/*
    De Morgan's law
*/

(eq (and A B) (not (or (not A) (not B))))
</script>

<script id="example-clslog1" type="text/plain">
/*
    classical logic example
*/

(
    RULE
    (
        READ
        
        /*
            [not intro]
             A |- false
            ------------
                ~ A
        */
        (
            MATCH
            (VAR <A>)
            (RULE (READ) (WRITE (not <A>) <A>))
        )
        (
            MATCH
            (VAR <A>)
            (RULE (READ false) (WRITE (not <A>)))
        )
        
        /*
            [and intro]
               A, B
            ----------
              A /\ B
        */
        (
            MATCH
            (VAR <A> <B>)
            (RULE (READ <A> <B>) (WRITE (and <A> <B>)))
        )
        
        /*
            [or intro]
                A       B
            -------- --------
             A \/ B   A \/ B
        */
        (
            MATCH
            (VAR <A> <B>)
            (RULE (READ <A>) (WRITE (or <A> <B>)))
        )
        (
            MATCH
            (VAR <A> <B>)
            (RULE (READ <B>) (WRITE (or <A> <B>)))
        )
        
        /*
            [impl intro]
             A |- B
            --------
             A -> B
        */
        (
            MATCH
            (VAR <A> <B>)
            (RULE (READ) (WRITE (impl <A> <B>) <A>))
        )
        (
            MATCH
            (VAR <A> <B>)
            (RULE (READ <B>) (WRITE (impl <A> <B>)))
        )
        
        /*
            [eq intro]
             A -> B /\ B -> A
            ------------------
                 A <-> B
        */
        (
            MATCH
            (VAR <A> <B>)
            (RULE (READ (and (impl <A> <B>) (impl <B> <A>))) (WRITE (eq <A> <B>)))
        )
    )
    (
        CHAIN
    )
    (
        WRITE
        
        /*
            [exist quant elim]
              ((exists X) A)
            -------------------
             ~((forall X) ~ A)
        */
        (
            MATCH
            (VAR <X> <Y> <A>)
            (RULE (READ ((exists <X>) <A>)) (WRITE (not ((forall <X>) (not <A>)))))
        )
        
        /*
            [univ quant elim]
              ((forall X) A)
            ------------------
             Y -> (A [X := Y])
        */
        (
            MATCH
            (VAR <X> <Y> <A>)
            (RULE (READ ((forall <X>) <A>)) (WRITE (impl <X> (subst <A> <X> <Y>))))
        )
        
        /*
            [eq elim]
                 A <-> B
            ------------------
             A -> B /\ B -> A
        */
        (
            MATCH
            (VAR <A> <B>)
            (RULE (READ (eq <A> <B>)) (WRITE (and (impl <A> <B>) (impl <B> <A>))))
        )
        
        /*
            [impl elim]
             A -> B
            --------
             A |- B 
        */
        (
            MATCH
            (VAR <A> <B>)
            (RULE (READ (impl <A> <B>) <A>) (WRITE  <B>))
        )
        
        /*
            [and elim]
             A /\ B   A /\ B
            -------- --------
                A       B
        */
        (
            MATCH
            (VAR <A> <B>)
            (RULE (READ (and <A> <B>)) (WRITE <A>))
        )
        (
            MATCH
            (VAR <A> <B>)
            (RULE (READ (and <A> <B>)) (WRITE <B>))
        )
        
        /*
            [or elim]
              A \/ B
            ----------
               A, B
        */
        (
            MATCH
            (VAR <A> <B>)
            (RULE (READ (or <A> <B>)) (WRITE <A> <B>))
        )
        
        /*
            [not elim]
                ~ A
            ------------
             A |- false
        */
        (
            MATCH
            (VAR <A>)
            (RULE (READ (not <A>) <A>) (WRITE false))
        )
    )
)
</script>

<script id="example-clslog-input1" type="text/plain">
/*
    De Morgan's law
*/

(eq (and A B) (not (or (not A) (not B))))
</script>

<style type="text/css" media="screen">
    /*
    @font-face {
        font-family: 'Fira';
        src: url('FiraCode-Regular.ttf');
    }
    */
    
    html, body
    {
        height: 100%;
        width: 100%;
        margin-top: 0px;
        margin-left: 0px;
        background-color: white;
    }
    
    body {
        overflow: hidden;
    }

    #RLset1 {
        position:relative;
        width: 100%;
        height: 100%;
    }
    #input1 {
        position: relative;
        width: 100%;
        height: 100%;
        display: block;
    }
    #output1 {
        position: relative;
        width: 100%;
        height: 100%;
        display: block;
    }
    #nodes1 {
        position: relative;
        width: 100%;
        height: 100%;
        display: block;
    }
    
    #title  {color: #555555;}
    #foot   {color: #000000;}
    #all    {border-radius: 0px; border-spacing: 0px; border:0px solid #555555; color:#EEEEEE; background-color:#555555;}
    #top    {border-radius: 0px 0px 0px 0px; border-spacing: 0px; border:0px; color:#EEEEEE; background-color:#555555;}
    #bot    {border-radius: 0px 0px 0px 0px; border-spacing: 0px; border:0px; color:#EEEEEE; background-color:#555555;}
    #none   {border-radius: 0px 0px 0px 0px; color:#EEEEEE; background-color:#555555;}
    #in     {border:1px solid #555555; border-spacing: 0px; color:#EEEEEE; background-color:gray;}
    #dark   {border-spacing: 0px; border-left: 1px solid #4466DD; border-right: 1px solid #4466DD; border-bottom: 1px solid #4466DD; color:#DDEEFF; background-color:#334488;}

    a.exHover:visited, a.exHover:link {cursor: pointer; background-color: #333333; color:#EEEEEE; text-decoration:none; border-radius: 0px;}
    a.exHover:hover {cursor: pointer; background-color: #999999; color:#EEEEEE; text-decoration:none; border-radius: 0px;}
    a.exHover:active {cursor: pointer; background-color: #DDDDDD; color:#FFFFFF; text-decoration:none; border-radius: 0px;}
    a {text-align: center;}

    .dropbtn:visited {cursor: pointer; background-color: #333333; color:#EEEEEE; text-decoration:none; border-radius: 15px;}
    .dropbtn:link {cursor: pointer; background-color: #333333; color:#EEEEEE; text-decoration:none; border-radius: 15px;}
    .dropbtn:hover {cursor: pointer; background-color: #999999; color:#EEEEEE; text-decoration:none; border-radius: 15px;}
    .dropbtn:active {cursor: pointer; background-color: #DDDDDD; color:#FFFFFF; text-decoration:none; border-radius: 15px;}
    .dropbtn {
      text-align: left;
    }

    .dropdown {
      position: relative;
      display: inline-block;
    }

    .dropdown-content {
      border-radius: 0px;
      display: block;
      /*position: absolute;*/
      background-color: #555555;
      width: 300px;
      overflow: auto;
      z-index: 65525;
      font-size: 0.8em;
      height: 100%;
    }

    .dropdown-content a {
      text-align: left;
      color: #BBBBBB;
      padding: 4px 12px;
      text-decoration: none;
      display: block;
      font-weight: normal;
    }

    .dropdown-content div {
      text-align: left;
      color: #BBBBBB;
      padding: 4px 12px;
      text-decoration: none;
      display: block;
    }

    
    .dropdown-content a:hover {background-color: #999999;}
    .dropdown-content a:active {cursor: pointer; background-color: #DDDDDD; color:#FFFFFF; text-decoration: none;}
    
    .show {display: block;}
/*
    red {filter: grayscale(100%) contrast(1) brightness(0.75) url("data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg'><filter id='f'><feColorMatrix color-interpolation-filters='sRGB' type='matrix' values='1 0 0 0 0  0 0 0 0 0  0 0 0 0 0  0 0 0 1 0'/></filter></svg>#f");}
    grn {filter: grayscale(100%) contrast(1) brightness(0.75) url("data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg'><filter id='f'><feColorMatrix color-interpolation-filters='sRGB' type='matrix' values='0 0 0 0 0  0 1 0 0 0  0 0 0 0 0  0 0 0 1 0'/></filter></svg>#f");}
    blu {filter: grayscale(100%) contrast(1) brightness(0.75) url("data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg'><filter id='f'><feColorMatrix color-interpolation-filters='sRGB' type='matrix' values='0 0 0 0 0  0 0 0 0 0  0 0 1 0 0  0 0 0 1 0'/></filter></svg>#f");}
*/
    red {filter: grayscale(100%) contrast(1) brightness(0.75) url("data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg'><filter id='f'><feColorMatrix color-interpolation-filters='sRGB' type='matrix' values='1 0 0 0 0  0 1 0 0 0  0 0 1 0 0  0 0 0 1 0'/></filter></svg>#f");}
    grn {filter: grayscale(100%) contrast(1) brightness(0.75) url("data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg'><filter id='f'><feColorMatrix color-interpolation-filters='sRGB' type='matrix' values='1 0 0 0 0  0 1 0 0 0  0 0 1 0 0  0 0 0 1 0'/></filter></svg>#f");}
    blu {filter: grayscale(100%) contrast(1) brightness(0.75) url("data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg'><filter id='f'><feColorMatrix color-interpolation-filters='sRGB' type='matrix' values='1 0 0 0 0  0 1 0 0 0  0 0 1 0 0  0 0 0 1 0'/></filter></svg>#f");}

mark {
  color: 0;/*transparent;*/
  background-color: rgb(75,75,75);/*#d4e9ab; /* or whatever */
}

</style>
</head>
<body style="font-family: Arial, Helvetica, sans-serif;">
<table width="100%" height="100%" align="center" valign="middle" cellspacing="0" cellpadding="0" border="10px" style="border: 10px solid white;">
<tbody>
<tr>
<td class="exRound" id="top" cellpadding="10" align="center" valign="middle" height="30">
<font size="5"><strong>reasoner.js playground (work in progress)</strong></font>
</td>
</tr>
<tr>
<td id="in">
    <table width="100%" cellspacing="0" cellpadding="0" height="100%" border="0">
        <tbody><tr height="100%">
        <td width="0%" style="padding: 10px; padding-right:0;" >
    <div class="dropdown-content" width="100%" height="100%">
        <b><nobr>
        <!--div class="droplbl"><hr/>initial test</div>
        <a href="javascript:populate1('example0');">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; hearing voices</a>

        <div class="droplbl"><hr/>basic</div>
        <a href="javascript:populate1('example1-1');">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <red>❎</red> hello world 1</a>
        <a href="javascript:populate1('example2a');">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <grn>✅</grn> conversation decision</a>
        <a href="javascript:populate1('example3ze');">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <grn>✅</grn> gravity decision</a>
        <a href="javascript:populate1('example3ae');">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <grn>✅</grn> job title decision</a>
        <a href="javascript:populate1('example3be');">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <grn>✅</grn> student decision</a>
        <a href="javascript:populate1('example3ce');">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <grn>✅</grn> computer expert decision</a-->
        
<!--red>❎</red><grn>✅</grn><blu>🟩</blu-->

<br/>

        <a href="javascript:populate1('test0');"><red>❎</red> stress test</a>
        
<div class="droplbl">1. quick tutorial</div>

<div class="droplbl">&nbsp;&nbsp;&nbsp;&nbsp; 1.1. rules</div>

<div class="droplbl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 1.1.1. constants</div>

        <a href="javascript:populate1('example1-1');">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <grn>✅</grn> hello world</a>
<div class="droplbl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 1.1.2. variables</div>
        <a href="javascript:populate1('example1-2');">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <grn>✅</grn> hello entity</a>

<div class="droplbl">&nbsp;&nbsp;&nbsp;&nbsp; 1.2. rule systems</div>

<div class="droplbl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 1.2.1. constants</div>

        <a href="javascript:populate1('example-2-1-1');">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <grn>✅</grn> toy making decision</a>
        <!--a href="javascript:populate1('example-2-1-2');">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <grn>✅</grn> shadows decision</a-->
        
<div class="droplbl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 1.2.2. variables</div>

        <a href="javascript:populate1('example-2-2-2');">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <grn>✅</grn> job title decision</a>
        <!--a href="javascript:populate1('example-2-2-1');">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <grn>✅</grn> weighting decision</a-->

<div class="droplbl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 1.2.3. nondeterministic rules</div>
        <a href="javascript:populate1('example-2-3-1');">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <red>❎</red> student decision</a>
        <a href="javascript:populate1('example-2-3-2');">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <red>❎</red> computer expert decision</a>

<div class="droplbl">&nbsp;&nbsp;&nbsp;&nbsp; 1.3 metarules and typing</div>
        <a href="javascript:populate1('example-3-2-3');">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <grn>✅</grn> world spinning decision</a>
        <a href="javascript:populate1('example-3-2-1');">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <grn>✅</grn> weighting decision</a>

<div class="droplbl">2. computing examples</div>

<div class="droplbl">&nbsp;&nbsp;&nbsp;&nbsp;2.1. programming</div>
        <!--a href="javascript:populate1('example-eq');">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <grn>✅</grn> equality predicate hack</a-->
        <a href="javascript:populate1('example-branch');">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <grn>✅</grn> branching choice</a>
        <a href="javascript:populate1('example-bool');">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <grn>✅</grn> Boolean evaluator</a>
        <a href="javascript:populate1('example-binadd');">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <grn>✅</grn> binary number addition</a>
        <a href="javascript:populate1('example-bincompare');">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <grn>✅</grn> binary number comparison</a>

<div class="droplbl">&nbsp;&nbsp;&nbsp;&nbsp;2.2. calculi</div>
        <!--a href="javascript:populate1('example-ski');">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <red>❎</red> SKI calculus</a-->
        <a href="javascript:populate1('example-lcalc');">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <red>❎</red> lambda calculus</a>
        <a href="javascript:populate1('example-poslog');">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <red>❎</red> positive logic</a>
        <a href="javascript:populate1('example-loglcalc');">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <red>❎</red> positive logic typed lambda calculus</a>

<div class="droplbl">&nbsp;&nbsp;&nbsp;&nbsp;2.3. proofs</div>
        <!--a href="javascript:populate1('example-proofcheck1');">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <grn>✅</grn> checking De Morgan's law</a-->
        <a href="javascript:populate1('example-proofcheck');">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <grn>✅</grn> proof checker</a>
        <a href="javascript:populate1('example-clslog');">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <red>❎</red> validity checker</a>

<!--div class="droplbl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <blu>🟩</blu> classical logic...</div-->
<!--div class="droplbl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <blu>🟩</blu> lambda cube...</div-->

<br/><br/>
        <!--a href="javascript:populate1('example7');">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <blu>🟩</blu> lambda calculus</a>
        <a href="javascript:populate1('example8');">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <blu>🟩</blu> propositional logic</a>
        <!--a href="javascript:populate1('');">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <blu>🟩</blu> set theory</a-->

        <!--div class="droplbl"><hr/>miscellaneous</div>
        <a href="javascript:populate('exmpl-binadd');">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; binary number addition</a>
        <a href="javascript:populate('exmpl-bincompare');">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; binary number comparison</a>
        <a href="javascript:populate('exmpl-meta1');">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; meta-rules</a-->
        </nobr></b>
    </div>
        </td>
        <td width="100%">
        <table width="100%" cellspacing="10" cellpadding="0" height="100%" border="0">
        <tbody>
        <tr height="100%">
        <td width="50%"">
            <table width="100%" cellspacing="0" cellpadding="0" height="100%" border="0">
            <tbody><tr>
             <td class="exRound" id="top" valign="middle" height="30" width="100%">
                <font size="2">
                <b>
<div class="dropdown">
                  &nbsp;&nbsp; rules: &nbsp;&nbsp;
                  <!--a id="mdd" onclick="myFunction()" href="javascript:void(null);" class="dropbtn">
                    &nbsp;&nbsp; examples &nbsp;&nbsp;
                  </a--> &nbsp;&nbsp;
    <!--div id="myDropdown" class="dropdown-content">
        <div class="droplbl"><hr/>initial test</div>
        <a href="javascript:populate1('example0');">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; hearing voices</a>

        <div class="droplbl"><hr/>intro</div>
        <a href="javascript:populate1('example1-1');">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; hello world 1</a>
        <a href="javascript:populate1('example1-2');">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; hello world 2</a>
        <a href="javascript:populate1('example2e');">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; conversation decision</a>
        <a href="javascript:populate1('example3e');">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; make toy decision</a>
        
        <div class="droplbl"><hr/>basic - extensional reasoning</div>
        <a href="javascript:populate1('example4e');">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; job title decision</a>
        <a href="javascript:populate1('example5e');">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; student decision</a>
        <a href="javascript:populate1('example6e');">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; computer expert decision</a>

        <div class="droplbl"><hr/>intermediate - intensional reasoning</div>
        <a href="javascript:populate1('example4i');">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; job title decision</a>
        <a href="javascript:populate1('example5i');">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; student decision</a>
        <a href="javascript:populate1('example6i');">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; computer expert decision</a>
        
        <div class="droplbl"><hr/>advanced</div>
        <a href="javascript:populate1('example7');">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; lambda calculus</a>

    </div-->
</div>
                </b>
                </font>
             </td>
            </tr>
            <tr height="100%">
             <!-- style="margin-top:-8px;"-->
             <td class="exRound" id="in" valign="top" style="" width="100%">
                <div id="rules" class="container"  width="100%" style="position: relative; width: 100%; height: 100%;">
                </div>
                <script>
                    var options = {
                        font: "8pt monospace",
                        tabWidth: 4,
                        colorText: "rgb(208,208,208)",
                        colorTextBack: "black",
                        colorSelection: "white",
                        colorSelectionBack: "gray",
                        colorKeyword: "rgb(104,104,104)",
                        colorKeywordBack: "transparent",
                        colorBracketMatch: "white",
                        colorBracketMatchBack: "rgb(75,75,75)",
                        colorStringAndComment: "rgb(104,104,104)",
                        keywords: ["\\bCHAIN\\b|\\bREAD\\b|\\bWRITE\\b|\\bMATCH\\b|\\bVAR\\b|\\bRULE\\b|\\batom\\b|\\bcons\\b|\\blist\\b"], //["(?<=((\\(\\0x0000(\\s)*)|(\\((\\s)*)))(?!(\\0x0000|\\())([^\\s\\(\\)])+(?=(\\s|\\(|\\)|$))"],
                        //stringsAndComments: "(/(?!\\*)(?!\\/)([^/\\\\\\n]|(\\\\.))*((/i)|(/)|(\\n)|($)))|(\"([^\"\\\\\\n]|(\\\\.))*((\")|(\\n)|($)))|(\\/\\/((.*\\n)|(.*$)))|(\\/\\*[\\S\\s]*?((\\*\\/)|$))"
                        stringsAndComments: "(\"([^\"\\\\\\n]|(\\\\.))*((\")|(\\n)|($)))|(\\/\\/((.*\\n)|(.*$)))|(\\/\\*[\\S\\s]*?((\\*\\/)|$))"
                    }
                    var rules1 = edit ("rules", options);

                    document.addEventListener('selectionchange', function(e) {
                        var pos = getCoords(rules1.getValue(), rules1.getSelectionStart());
                        document.getElementById('lblGrammarCaret').innerHTML = "(" + pos.row + ", " + pos.column + ")&nbsp;&nbsp;";
                    });                    
                </script>
             </td>
            </tr>
            <tr>
              <td class="exRound" id="bot" height="5" align="right">
               <font size="1">
                <span id="lblGrammarCaret">(1, 1)</span>&nbsp;&nbsp;&nbsp;&nbsp;
               </font>
              </td>
            </tr>
            </tbody></table>
        </td>
        <td width="50%" height="100%">
            <table width="100%" cellspacing="0" cellpadding="0" height="50%" border="0" style="padding-bottom: 5px;">
            <tbody><tr>
             <td class="exRound" id="top" valign="middle" height="30">
                <font size="2">
                <b>
                  &nbsp;&nbsp; read: &nbsp;&nbsp;
                </b>
                </font>
             </td>
            </tr>
            <tr height="100%">
             <td class="exRound" id="in" style="border-radius: 0px 0px 0px 0px;">
                <div id="input" class="container" style="position: relative; width: 100%; height: 100%;">
                </div>
                <script>
                    var options = {
                        font: "8pt monospace",
                        tabWidth: 4,
                        colorText: "rgb(208,208,208)",
                        colorTextBack: "black",
                        colorSelection: "white",
                        colorSelectionBack: "gray",
                        colorKeyword: "rgb(104,104,104)",
                        colorKeywordBack: "transparent",
                        colorBracketMatch: "white",
                        colorBracketMatchBack: "rgb(75,75,75)",
                        colorStringAndComment: "rgb(104,104,104)",
                        keywords: ["failure"],//["(?<=((\\(\\0x0000(\\s)*)|(\\((\\s)*)))(?!(\\0x0000|\\())[^\\s\\(\\)]+(?=(\\s|\\(|\\)|$))"],
                        //stringsAndComments: "(/(?!\\*)(?!\\/)([^/\\\\\\n]|(\\\\.))*((/i)|(/)|(\\n)|($)))|(\"([^\"\\\\\\n]|(\\\\.))*((\")|(\\n)|($)))|(\\/\\/((.*\\n)|(.*$)))|(\\/\\*[\\S\\s]*?((\\*\\/)|$))"
                        stringsAndComments: "(\"([^\"\\\\\\n]|(\\\\.))*((\")|(\\n)|($)))|(\\/\\/((.*\\n)|(.*$)))|(\\/\\*[\\S\\s]*?((\\*\\/)|$))"
                    }
                    var input1 = edit ("input", options);

                    document.addEventListener('selectionchange', function(e) {
                        var pos = getCoords(input1.getValue(), input1.getSelectionStart());
                        document.getElementById('lblGrammarCaret1').innerHTML = "(" + pos.row + ", " + pos.column + ")&nbsp;&nbsp;";
                    });                    
                </script>
             </td>
            </tr>
            <tr>
              <td class="exRound" id="bot" height="5" align="right">
               <font size="1">
                <span id="lblGrammarCaret1">(1, 1)</span>&nbsp;&nbsp;&nbsp;&nbsp;
               </font>
              </td>
            </tr>
            </tbody></table>
            <table width="100%" cellspacing="0" cellpadding="0" height="50%" border="0" style="padding-top: 5px;">
            <tbody><tr>
             <td class="exRound" id="top" valign="middle" height="30">
                <font size="2">
                <b>
                  &nbsp;&nbsp; write: &nbsp;&nbsp;
                  <a onclick="process()" class="exHover" href="javascript:void(null);">
                    &nbsp;&nbsp; process &nbsp;&nbsp;
                  </a> &nbsp;&nbsp;
                </b>
                </font>
             </td>
            </tr>
            <tr height="100%">
             <td class="exRound" id="in" style="border-radius: 0px 0px 0px 0px;">
              <textarea id="output" readonly wrap="off" spellcheck="false" id="output" style="outline: none; box-sizing: border-box; width: 100%; height:100%; resize: none; display: block; border-style: none; background-color: black; color: white; font: 8pt monospace; border-radius: 0px 0px 0px 0px; margin: 0; padding:5px;"></textarea>
                <script>
                    output1 = document.getElementById('output');
                </script>
             </td>
            </tr>
            </tbody></table>
        </td>
        </tr>
        </tbody>
        </table>
        </tr>
    </tbody></table>
</td>
</tr>
<tr>
 <td id="bot" valign="middle" height="30">
    <table width="100%" height="100%">
    <tr>
        <td align="left">
            <!--font size="2">
                &nbsp;&nbsp; &nbsp;&nbsp;
            </font-->
        </td>
        <td align="right">
            <font size="3">
              <b>
                <a class="exHover" href="https://github.com/contrast-zone/reasoner.js" target="new">
                &nbsp;&nbsp; visit me on GitHub &nbsp;&nbsp;
                </a>
                &nbsp;&nbsp; &nbsp;&nbsp;
              </b>
            </font>
        </td>
    </tr>
    </table>
 </td>
</tr>
</tbody>
</table>

<script>
    /* When the user clicks on the button, 
    toggle between hiding and showing the dropdown content */
    function myFunction() {
      document.getElementById("myDropdown").draggable = false;
      document.getElementById("myDropdown").ondragstart = function () {return false};
            
      document.getElementById("myDropdown").style.left = document.getElementById("mdd").offsetLeft + "px";
      document.getElementById("myDropdown").style.top = document.getElementById("mdd").offsetTop + document.getElementById("mdd").offsetHeight + 3 + "px";
      
      document.getElementById("myDropdown").classList.toggle("show");
    }

    // Close the dropdown if the user clicks outside of it
    window.onclick = function(event) {
      if (!event.target.matches('.dropbtn') && !event.target.matches('.droplbl')) {
        var dropdowns = document.getElementsByClassName("dropdown-content");
        var i;
        for (i = 0; i < dropdowns.length; i++) {
          var openDropdown = dropdowns[i];
          if (openDropdown.classList.contains('show')) {
            openDropdown.classList.remove('show');
          }
        }
      }
    }
    
    function getCoords (text, offset) {
        var i, ch, row = 1, col = 1;
        if (text.length > 0)
            for (i = 0; i < offset; i += 1) {
                ch = text.charCodeAt(i);
                if (ch === 13 || ch === 10) {
                    if (ch === 13 && text.charCodeAt (i + 1) === 10)
                        i += 1;

                    row += 1;
                    col = 1;
                    
                } else
                  col += 1;
            }
        
        return {row: row, column: col};
    }

    function onkd () {
        var c = getCoords (input1.getValue (), input1.getSelectionStart ())
        document.getElementById("lblGrammarCaret").innerHTML = "(" + c.row + ", " + c.column + ")";
    }
    
    function populate1 (param) {
        rules1.setValue (document.getElementById(param).innerHTML);
        if (document.getElementById(param + "-input"))
            input1.setValue (document.getElementById(param + "-input").innerHTML);
        else
            input1.setValue ("");
            
        output1.value = "";
        setTimeout(function() {
            rules1.setSelectionStart (0);
            rules1.setSelectionEnd (0);
            input1.setSelectionStart (0);
            input1.setSelectionEnd (0);
            output1.selectionStart = 0;
            output1.selectionEnd = 0;
            onkd ();
            input1.setFocus ();
        }, 0);
    }
    
    cr = String.fromCharCode(13);
    
    function stringify (node, indent) {
        if (typeof node === "string") {
            return node + "\n";
        }
        
        var str = ""
        
        str += indent + "(\n";
        
        for (var i = 0; i < node.length; i++) {
            if (Array.isArray (node[i]))
                str += stringify (node[i], indent + "    ");
                
            else {
                var part
                if (node [i] === undefined)
                    part = "UNDEFINED";
                    
                else if (node [i] === null)
                    part = "()";
                    
                else
                    part = node[i].replaceAll("\n", "\\n");
                 
                 str += indent + "    " + part + "\n";
            }
        }
        
        str += indent + ")\n";
        
        return str;
    }
    
    function process () {
        output1.value = "";
        setTimeout (function (){
            var rules = SExpr.parse (rules1.getValue ());
            if (rules.err) {
                var c = getCoords (rules1.getValue (), rules.pos)
                output1.value = "rules error: " + rules.err + " at " + "(" + c.row + ", " + c.column + ")";
            } else {
                var input = SExpr.parse (input1.getValue ());
                if (input.err) {
                    var c = getCoords (input1.getValue (), input.pos)
                    output1.value = "Input error: " + input.err + " at " + "(" + c.row + ", " + c.column + ")";
                } else {
                    var output = Rewriter.rewrite (rules, input);
                    //var output = Rewriter.prove (rules, input, "FWD");
                    if (output.err) {
                        output1.value = "processing error";// at: " + JSON.stringify (output.err.indexes);
                    } else {
                        output1.value = stringify (output.output, "");
                        /*
                        output1.value += "\nPROOF:\n";
                        output1.value += JSON.stringify (output.proof, null, 2);
                        output1.value += "\n\nRULES:\n";
                        output1.value += JSON.stringify (output.rules, null, 2);
                        */
                    }
                }
            }
            output1.selectionStart = 0;
            output1.selectionEnd = 0;
        }, 0);
    }

    
    //input1.addEventListener("keyup", onkd, false);
    //input1.addEventListener("input", onkd, false);
    //input1.addEventListener("mousedown", onkd, false);
    //input1.addEventListener("mouseup", onkd, false);

    populate1 ('example1-1');
    //populate1 ('test0');
</script>

</body>
</html>

